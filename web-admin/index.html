<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>AH Trading Admin</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="shell">
      <div class="app-wrap">
        <aside class="sidebar" id="sidebar">
          <div class="brand">
            <div>
              <p class="eyebrow">AH Trading</p>
              <h1>Web Admin</h1>
              <div class="mt-2 flex flex-wrap items-center gap-2">
                <span id="connStatus" class="badge" data-tone="bad">Disconnected</span>
                <button class="btn btn-outline" id="openConn" type="button">Connection</button>
              </div>
            </div>
            <button class="btn btn-ghost px-3 py-2" type="button" id="toggleSidebar" title="Collapse sidebar">
              <span class="kbd">[</span>
            </button>
          </div>

          <nav class="nav" aria-label="Primary navigation">
            <div class="nav__group">Overview</div>
            <button class="nav__item active" data-section="dashboard" type="button">
              <span class="nav__dot"></span>
              Dashboard
            </button>

            <div class="nav__group">Catalog</div>
            <button class="nav__item" data-section="items" type="button"><span class="nav__dot"></span>Items</button>
            <button class="nav__item" data-section="inventory" type="button"><span class="nav__dot"></span>Inventory</button>

            <div class="nav__group">Sales</div>
            <button class="nav__item" data-section="customers" type="button"><span class="nav__dot"></span>Customers</button>
            <button class="nav__item" data-section="sales" type="button"><span class="nav__dot"></span>Sales</button>

            <div class="nav__group">Purchasing</div>
            <button class="nav__item" data-section="suppliers" type="button"><span class="nav__dot"></span>Suppliers</button>
            <button class="nav__item" data-section="purchases" type="button"><span class="nav__dot"></span>Purchases</button>

            <div class="nav__group">Operations</div>
            <button class="nav__item" data-section="intercompany" type="button"><span class="nav__dot"></span>Intercompany</button>

            <div class="nav__group">Accounting</div>
            <button class="nav__item" data-section="accounting" type="button"><span class="nav__dot"></span>Accounting</button>
            <button class="nav__item" data-section="coa" type="button"><span class="nav__dot"></span>Chart of Accounts</button>
            <button class="nav__item" data-section="reports" type="button"><span class="nav__dot"></span>Reports</button>

            <div class="nav__group">Automation</div>
            <button class="nav__item" data-section="ai" type="button"><span class="nav__dot"></span>AI Hub</button>
            <button class="nav__item" data-section="ai-settings" type="button"><span class="nav__dot"></span>AI Settings</button>

            <div class="nav__group">System</div>
            <button class="nav__item" data-section="config" type="button"><span class="nav__dot"></span>Configuration</button>
            <button class="nav__item" data-section="devices" type="button"><span class="nav__dot"></span>POS Devices</button>
            <button class="nav__item" data-section="users" type="button"><span class="nav__dot"></span>Users & Roles</button>
            <button class="nav__item" data-section="auth" type="button"><span class="nav__dot"></span>Authentication</button>
          </nav>

          <div class="border-t p-3" style="border-color: rgb(var(--border) / 0.92);">
            <div class="grid gap-2">
              <button class="btn btn-outline w-full justify-start" type="button" id="openCmdk">
                <span class="text-slate-700">Search</span>
                <span class="ml-auto flex items-center gap-1">
                  <span class="kbd">Cmd</span>
                  <span class="kbd">K</span>
                </span>
              </button>
              <div class="text-xs text-slate-700/80">
                This web-admin is a static client. For the “real” Admin ERP, use <code>apps/admin</code>.
              </div>
            </div>
          </div>
        </aside>

        <main class="min-w-0 flex-1">
          <header class="topbar">
            <div class="topbar__inner">
              <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
                <div class="space-y-1">
                  <p class="eyebrow" id="pageEyebrow">Admin</p>
                  <h2 class="text-2xl font-semibold tracking-tight text-slate-950" id="pageTitle">Dashboard</h2>
                  <p class="muted" id="pageSubtitle">
                    Fast “power admin” UI for ops, purchasing, inventory, and accounting.
                  </p>
                </div>

                <div class="flex flex-wrap items-center gap-2">
                  <button class="btn btn-outline" type="button" id="topSearch">
                    <span class="text-slate-700">Search pages and actions</span>
                    <span class="ml-2 hidden items-center gap-1 sm:flex">
                      <span class="kbd">Cmd</span>
                      <span class="kbd">K</span>
                    </span>
                  </button>

                  <button class="btn btn-primary" type="button" data-open="items">New Item</button>
                  <button class="btn btn-outline" type="button" data-open="purchases">New PO</button>
                </div>
              </div>
            </div>
          </header>

          <div id="toastRoot" class="toast-root" aria-live="polite" aria-relevant="additions"></div>

          <div class="px-0 pb-6 pt-2 sm:pb-10">
            <section class="section active" data-section="dashboard">
              <div class="mx-auto max-w-6xl space-y-6">
                <div class="stat-grid">
                  <div class="stat">
                    <div class="stat__k">Today Sales</div>
                    <div id="metricSalesUsd" class="stat__v">$0</div>
                    <div id="metricSalesLbp" class="stat__s">LBP 0</div>
                  </div>
                  <div class="stat">
                    <div class="stat__k">Today Purchases</div>
                    <div id="metricPurchasesUsd" class="stat__v">$0</div>
                    <div id="metricPurchasesLbp" class="stat__s">LBP 0</div>
                  </div>
                  <div class="stat">
                    <div class="stat__k">Accounts Receivable</div>
                    <div id="metricArUsd" class="stat__v">$0</div>
                    <div id="metricArLbp" class="stat__s">LBP 0</div>
                  </div>
                  <div class="stat">
                    <div class="stat__k">Accounts Payable</div>
                    <div id="metricApUsd" class="stat__v">$0</div>
                    <div id="metricApLbp" class="stat__s">LBP 0</div>
                  </div>
                  <div class="stat">
                    <div class="stat__k">Stock Value</div>
                    <div id="metricStockUsd" class="stat__v">$0</div>
                    <div id="metricStockLbp" class="stat__s">LBP 0</div>
                  </div>
                  <div class="stat">
                    <div class="stat__k">Low Stock SKUs</div>
                    <div id="metricLowStock" class="stat__v">0</div>
                    <div class="stat__s">Reorder queue</div>
                  </div>
                </div>

                <div class="grid grid-cols-1 gap-4 lg:grid-cols-2">
                  <div class="card">
                    <div class="card__head">
                      <div>
                        <div class="text-lg font-semibold text-slate-950">Quick Actions</div>
                        <div class="muted">Common workflows.</div>
                      </div>
                      <button class="btn btn-outline" type="button" data-open="auth">Login</button>
                    </div>
                    <div class="card__body">
                      <div class="grid grid-cols-2 gap-2 sm:grid-cols-3">
                        <button class="btn btn-outline" type="button" data-open="items">Add Items</button>
                        <button class="btn btn-outline" type="button" data-open="inventory">Adjust Stock</button>
                        <button class="btn btn-outline" type="button" data-open="sales">Post Payment</button>
                        <button class="btn btn-outline" type="button" data-open="reports">VAT Report</button>
                        <button class="btn btn-outline" type="button" data-open="intercompany">Intercompany Issue</button>
                        <button class="btn btn-outline" type="button" data-open="ai-settings">AI Auto Rules</button>
                      </div>
                    </div>
                  </div>

                  <div class="card">
                    <div class="card__head">
                      <div>
                        <div class="text-lg font-semibold text-slate-950">Company Snapshot</div>
                        <div class="muted">Counts across catalog and partners.</div>
                      </div>
                      <span id="statusBlock" class="badge" data-tone="ok">Ready</span>
                    </div>
                    <div class="card__body">
                      <div class="grid grid-cols-2 gap-3 sm:grid-cols-4">
                        <div>
                          <div class="text-xs font-semibold uppercase tracking-wide text-slate-600">Items</div>
                          <div class="mt-1 text-xl font-semibold" id="metricItems">0</div>
                        </div>
                        <div>
                          <div class="text-xs font-semibold uppercase tracking-wide text-slate-600">Customers</div>
                          <div class="mt-1 text-xl font-semibold" id="metricCustomers">0</div>
                        </div>
                        <div>
                          <div class="text-xs font-semibold uppercase tracking-wide text-slate-600">Suppliers</div>
                          <div class="mt-1 text-xl font-semibold" id="metricSuppliers">0</div>
                        </div>
                        <div>
                          <div class="text-xs font-semibold uppercase tracking-wide text-slate-600">Status</div>
                          <div class="mt-1 text-xl font-semibold">Live</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="items">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">Items</div>
                      <div class="muted">Create SKUs, barcodes, reorder settings, and dual pricing.</div>
                    </div>
                    <div class="flex flex-wrap gap-2">
                      <button class="btn btn-outline" type="button" id="loadItems">Refresh</button>
                      <button class="btn btn-primary" type="button" data-open="items">New Item</button>
                    </div>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Add Item</div>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1">
                          <span class="label">SKU</span>
                          <input id="itemSku" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Name</span>
                          <input id="itemName" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">UoM</span>
                          <input id="itemUom" class="control" placeholder="pcs" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Barcode</span>
                          <input id="itemBarcode" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Reorder Point</span>
                          <input id="itemReorderPoint" class="control" type="number" step="0.01" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Reorder Qty</span>
                          <input id="itemReorderQty" class="control" type="number" step="0.01" />
                        </label>
                        <div class="sm:col-span-2 flex justify-end">
                          <button id="addItem" class="btn btn-primary" type="button">Create Item</button>
                        </div>
                      </div>
                    </div>

                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Add Price</div>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1 sm:col-span-2">
                          <span class="label">Item ID</span>
                          <input id="priceItemId" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">USD Price</span>
                          <input id="priceUsd" class="control" type="number" step="0.01" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">LBP Price</span>
                          <input id="priceLbp" class="control" type="number" step="0.01" />
                        </label>
                        <label class="grid gap-1 sm:col-span-2">
                          <span class="label">Effective From</span>
                          <input id="priceFrom" class="control" type="date" />
                        </label>
                        <div class="sm:col-span-2 flex justify-end">
                          <button id="addPrice" class="btn btn-outline" type="button">Save Price</button>
                        </div>
                      </div>
                    </div>

                    <div class="lg:col-span-2">
                      <div class="table-wrap">
                        <div id="itemsList"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="customers">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">Customers</div>
                      <div class="muted">Manage credit limits and contact details.</div>
                    </div>
                    <button class="btn btn-outline" type="button" id="loadCustomers">Refresh</button>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Add Customer</div>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1">
                          <span class="label">Name</span>
                          <input id="customerName" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Phone</span>
                          <input id="customerPhone" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Email</span>
                          <input id="customerEmail" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Credit Limit USD</span>
                          <input id="customerLimitUsd" class="control" type="number" step="0.01" />
                        </label>
                        <label class="grid gap-1 sm:col-span-2">
                          <span class="label">Credit Limit LBP</span>
                          <input id="customerLimitLbp" class="control" type="number" step="0.01" />
                        </label>
                        <div class="sm:col-span-2 flex justify-end">
                          <button id="addCustomer" class="btn btn-primary" type="button">Create Customer</button>
                        </div>
                      </div>
                    </div>
                    <div class="table-wrap">
                      <div id="customersList"></div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="suppliers">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">Suppliers</div>
                      <div class="muted">Vendors and sourcing profiles.</div>
                    </div>
                    <button class="btn btn-outline" type="button" id="loadSuppliers">Refresh</button>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Add Supplier</div>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1">
                          <span class="label">Name</span>
                          <input id="supplierName" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Phone</span>
                          <input id="supplierPhone" class="control" />
                        </label>
                        <label class="grid gap-1 sm:col-span-2">
                          <span class="label">Email</span>
                          <input id="supplierEmail" class="control" />
                        </label>
                        <div class="sm:col-span-2 flex justify-end">
                          <button id="addSupplier" class="btn btn-primary" type="button">Create Supplier</button>
                        </div>
                      </div>
                    </div>
                    <div class="table-wrap">
                      <div id="suppliersList"></div>
                    </div>

                    <div class="lg:col-span-2 card">
                      <div class="card__head">
                        <div>
                          <div class="font-semibold text-slate-950">Map Item to Supplier</div>
                          <div class="muted">Primary sourcing, lead times, and last cost.</div>
                        </div>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-3">
                        <label class="grid gap-1">
                          <span class="label">Supplier ID</span>
                          <input id="mapSupplierId" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Item ID</span>
                          <input id="mapItemId" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Primary</span>
                          <select id="mapPrimary" class="control">
                            <option value="false">No</option>
                            <option value="true">Yes</option>
                          </select>
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Lead Time Days</span>
                          <input id="mapLead" class="control" type="number" step="1" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Min Order Qty</span>
                          <input id="mapMinQty" class="control" type="number" step="0.01" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Last Cost USD</span>
                          <input id="mapCostUsd" class="control" type="number" step="0.01" />
                        </label>
                        <label class="grid gap-1 sm:col-span-2">
                          <span class="label">Last Cost LBP</span>
                          <input id="mapCostLbp" class="control" type="number" step="0.01" />
                        </label>
                        <div class="sm:col-span-3 flex justify-end">
                          <button id="mapSupplierItem" class="btn btn-outline" type="button">Save Mapping</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="inventory">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">Inventory</div>
                      <div class="muted">Stock positions and adjustments.</div>
                    </div>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Stock Summary</div>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1">
                          <span class="label">Item ID</span>
                          <input id="stockItemId" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Warehouse ID</span>
                          <input id="stockWarehouseId" class="control" />
                        </label>
                        <div class="sm:col-span-2 flex justify-end">
                          <button id="loadStock" class="btn btn-outline" type="button">Load Stock</button>
                        </div>
                        <div class="sm:col-span-2 table-wrap">
                          <div id="stockList"></div>
                        </div>
                      </div>
                    </div>

                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Inventory Adjustment</div>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1">
                          <span class="label">Item ID</span>
                          <input id="adjItemId" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Warehouse ID</span>
                          <input id="adjWarehouseId" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Qty In</span>
                          <input id="adjQtyIn" class="control" type="number" step="0.01" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Qty Out</span>
                          <input id="adjQtyOut" class="control" type="number" step="0.01" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Unit Cost USD</span>
                          <input id="adjCostUsd" class="control" type="number" step="0.01" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Unit Cost LBP</span>
                          <input id="adjCostLbp" class="control" type="number" step="0.01" />
                        </label>
                        <div class="sm:col-span-2 flex justify-end">
                          <button id="adjustStock" class="btn btn-primary" type="button">Post Adjustment</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="sales">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">Sales</div>
                      <div class="muted">Invoices, returns, and payment settlement.</div>
                    </div>
                    <div class="flex flex-wrap gap-2">
                      <button id="loadSales" class="btn btn-outline" type="button">Load invoices</button>
                      <button id="loadReturns" class="btn btn-outline" type="button">Load returns</button>
                    </div>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="table-wrap"><div id="salesList"></div></div>
                    <div class="table-wrap"><div id="returnsList"></div></div>

                    <div class="lg:col-span-2 card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Post Sales Payment</div>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1">
                          <span class="label">Invoice ID</span>
                          <input id="payInvoiceId" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Method</span>
                          <select id="paySalesMethod" class="control">
                            <option value="cash">Cash</option>
                            <option value="card">Card</option>
                            <option value="transfer">Transfer</option>
                            <option value="credit">Credit</option>
                          </select>
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Amount USD</span>
                          <input id="payUsd" class="control" type="number" step="0.01" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Amount LBP</span>
                          <input id="payLbp" class="control" type="number" step="0.01" />
                        </label>
                        <div class="sm:col-span-2 flex justify-end">
                          <button id="postPayment" class="btn btn-primary" type="button">Post Payment</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="purchases">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">Purchasing</div>
                      <div class="muted">Purchase orders, receipts, and supplier invoices.</div>
                    </div>
                    <div class="flex flex-wrap gap-2">
                      <button id="loadOrders" class="btn btn-outline" type="button">Orders</button>
                      <button id="loadReceipts" class="btn btn-outline" type="button">Receipts</button>
                      <button id="loadSupplierInvoices" class="btn btn-outline" type="button">Invoices</button>
                    </div>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="table-wrap"><div id="ordersList"></div></div>
                    <div class="space-y-4">
                      <div class="table-wrap"><div id="receiptsList"></div></div>
                      <div class="table-wrap"><div id="supplierInvoicesList"></div></div>
                    </div>

                    <div class="lg:col-span-2 card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Create Purchase Order</div>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1">
                          <span class="label">Supplier ID</span>
                          <input id="poSupplierId" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Exchange Rate</span>
                          <input id="poRate" class="control" type="number" step="0.01" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Item ID</span>
                          <input id="poItemId" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Qty</span>
                          <input id="poQty" class="control" type="number" step="0.01" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Unit Cost USD</span>
                          <input id="poCostUsd" class="control" type="number" step="0.01" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Unit Cost LBP</span>
                          <input id="poCostLbp" class="control" type="number" step="0.01" />
                        </label>
                        <div class="sm:col-span-2 flex justify-end">
                          <button id="createPO" class="btn btn-primary" type="button">Create PO</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="intercompany">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">Intercompany</div>
                      <div class="muted">Issue inventory between entities and settle balances.</div>
                    </div>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Issue</div>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1"><span class="label">Source Company ID</span><input id="icSourceCompany" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Issue Company ID</span><input id="icIssueCompany" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Sell Company ID</span><input id="icSellCompany" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Source Invoice ID</span><input id="icInvoice" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Warehouse ID</span><input id="icWarehouse" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Item ID</span><input id="icItem" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Qty</span><input id="icQty" class="control" type="number" step="0.01" /></label>
                        <label class="grid gap-1"><span class="label">Unit Cost USD</span><input id="icCostUsd" class="control" type="number" step="0.01" /></label>
                        <label class="grid gap-1 sm:col-span-2"><span class="label">Unit Cost LBP</span><input id="icCostLbp" class="control" type="number" step="0.01" /></label>
                        <div class="sm:col-span-2 flex justify-end"><button id="issueIntercompany" class="btn btn-primary" type="button">Issue</button></div>
                      </div>
                    </div>

                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Settlement</div>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1"><span class="label">From Company ID</span><input id="icFromCompany" class="control" /></label>
                        <label class="grid gap-1"><span class="label">To Company ID</span><input id="icToCompany" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Amount USD</span><input id="icAmountUsd" class="control" type="number" step="0.01" /></label>
                        <label class="grid gap-1"><span class="label">Amount LBP</span><input id="icAmountLbp" class="control" type="number" step="0.01" /></label>
                        <label class="grid gap-1"><span class="label">Exchange Rate</span><input id="icRate" class="control" type="number" step="0.01" /></label>
                        <label class="grid gap-1">
                          <span class="label">Method</span>
                          <select id="icMethod" class="control">
                            <option value="bank">Bank</option>
                            <option value="cash">Cash</option>
                          </select>
                        </label>
                        <div class="sm:col-span-2 flex justify-end"><button id="settleIntercompany" class="btn btn-outline" type="button">Settle</button></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="accounting">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">Accounting</div>
                      <div class="muted">Trial balance and account defaults for posting.</div>
                    </div>
                    <div class="flex flex-wrap gap-2">
                      <button id="loadTrial" class="btn btn-outline" type="button">Load trial</button>
                      <button id="loadDefaults" class="btn btn-outline" type="button">Reload defaults</button>
                    </div>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="table-wrap"><div id="trialBalance"></div></div>
                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Account Defaults</div>
                        <button id="saveDefaults" class="btn btn-primary" type="button">Save</button>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1">
                          <span class="label">Role Code</span>
                          <input id="defRole" class="control" placeholder="AR" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Account Code</span>
                          <input id="defAccount" class="control" placeholder="1100" />
                        </label>
                        <div class="sm:col-span-2 table-wrap">
                          <div id="defaultsList"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="reports">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">Reports</div>
                      <div class="muted">VAT, GL, and inventory valuation exports.</div>
                    </div>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">VAT</div>
                        <button id="loadVat" class="btn btn-outline" type="button">Load</button>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1">
                          <span class="label">Period</span>
                          <input id="vatPeriod" class="control" type="date" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Format</span>
                          <select id="vatFormat" class="control">
                            <option value="">JSON</option>
                            <option value="csv">CSV</option>
                          </select>
                        </label>
                        <div class="sm:col-span-2 table-wrap"><div id="vatOutput"></div></div>
                      </div>
                    </div>

                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">General Ledger</div>
                        <button id="loadGL" class="btn btn-outline" type="button">Load</button>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1">
                          <span class="label">Start Date</span>
                          <input id="glStart" class="control" type="date" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">End Date</span>
                          <input id="glEnd" class="control" type="date" />
                        </label>
                        <label class="grid gap-1 sm:col-span-2">
                          <span class="label">Format</span>
                          <select id="glFormat" class="control">
                            <option value="">JSON</option>
                            <option value="csv">CSV</option>
                          </select>
                        </label>
                        <div class="sm:col-span-2 table-wrap"><div id="glOutput"></div></div>
                      </div>
                    </div>

                    <div class="lg:col-span-2 card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Inventory Valuation</div>
                        <button id="loadInv" class="btn btn-outline" type="button">Load</button>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1">
                          <span class="label">Format</span>
                          <select id="invFormat" class="control">
                            <option value="">JSON</option>
                            <option value="csv">CSV</option>
                          </select>
                        </label>
                        <div class="sm:col-span-2 table-wrap"><div id="invOutput"></div></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="ai">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">AI Hub</div>
                      <div class="muted">Recommendations for replenishment and CRM.</div>
                    </div>
                    <button id="loadAI" class="btn btn-outline" type="button">Load</button>
                  </div>
                  <div class="card__body table-wrap">
                    <div id="aiList"></div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="ai-settings">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">AI Settings</div>
                      <div class="muted">Auto-execution rules for AI agents.</div>
                    </div>
                    <div class="flex flex-wrap gap-2">
                      <button id="loadAISettings" class="btn btn-outline" type="button">Reload</button>
                      <button id="saveAI" class="btn btn-primary" type="button">Save</button>
                    </div>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                    <label class="grid gap-1">
                      <span class="label">Agent Code</span>
                      <input id="aiAgentCode" class="control" placeholder="AI_PURCHASE" />
                    </label>
                    <label class="grid gap-1">
                      <span class="label">Auto Execute</span>
                      <select id="aiAuto" class="control">
                        <option value="false">No</option>
                        <option value="true">Yes</option>
                      </select>
                    </label>
                    <label class="grid gap-1">
                      <span class="label">Max Amount USD</span>
                      <input id="aiMaxAmount" class="control" type="number" step="0.01" />
                    </label>
                    <label class="grid gap-1">
                      <span class="label">Max Actions / Day</span>
                      <input id="aiMaxActions" class="control" type="number" step="1" />
                    </label>
                    <div class="sm:col-span-2 table-wrap">
                      <div id="aiSettingsList"></div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="config">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">Configuration</div>
                      <div class="muted">Exchange rates, tax codes, and payment mapping.</div>
                    </div>
                    <div class="flex flex-wrap gap-2">
                      <button id="loadPaymentMethods" class="btn btn-outline" type="button">Refresh payment map</button>
                    </div>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Exchange Rates</div>
                        <button id="addRate" class="btn btn-outline" type="button">Add</button>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1"><span class="label">Rate Date</span><input id="rateDate" class="control" type="date" /></label>
                        <label class="grid gap-1"><span class="label">Rate Type</span><input id="rateType" class="control" placeholder="market" /></label>
                        <label class="grid gap-1 sm:col-span-2"><span class="label">USD to LBP</span><input id="usdToLbp" class="control" type="number" step="0.01" /></label>
                        <div class="sm:col-span-2 table-wrap"><div id="ratesList"></div></div>
                      </div>
                    </div>

                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Tax Codes</div>
                        <button id="addTax" class="btn btn-outline" type="button">Add</button>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1"><span class="label">Name</span><input id="taxName" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Rate</span><input id="taxRate" class="control" type="number" step="0.01" /></label>
                        <div class="sm:col-span-2 table-wrap"><div id="taxList"></div></div>
                      </div>
                    </div>

                    <div class="lg:col-span-2 card">
                      <div class="card__head">
                        <div>
                          <div class="font-semibold text-slate-950">Payment Method Mapping</div>
                          <div class="muted">Map payment methods to accounting role codes.</div>
                        </div>
                        <button id="savePaymentMethod" class="btn btn-primary" type="button">Save</button>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1"><span class="label">Method</span><input id="payMapMethod" class="control" placeholder="cash/card/bank/transfer" /></label>
                        <label class="grid gap-1"><span class="label">Role Code</span><input id="payRoleCode" class="control" placeholder="CASH/BANK/AR" /></label>
                        <div class="sm:col-span-2 table-wrap"><div id="paymentMethodsList"></div></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="devices">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">POS Devices</div>
                      <div class="muted">Register devices and rotate tokens.</div>
                    </div>
                    <button id="loadDevices" class="btn btn-outline" type="button">Refresh</button>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="card">
                      <div class="card__head"><div class="font-semibold text-slate-950">Register Device</div></div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1"><span class="label">Device Code</span><input id="deviceCode" class="control" placeholder="POS-01" /></label>
                        <label class="grid gap-1"><span class="label">Branch ID</span><input id="deviceBranchId" class="control" placeholder="optional" /></label>
                        <div class="sm:col-span-2 flex justify-end"><button id="registerDevice" class="btn btn-primary" type="button">Register</button></div>
                        <div class="sm:col-span-2 table-wrap"><div id="deviceRegisterOutput"></div></div>
                      </div>
                    </div>
                    <div class="card">
                      <div class="card__head"><div class="font-semibold text-slate-950">Reset Token</div></div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1 sm:col-span-2"><span class="label">Device ID</span><input id="deviceResetId" class="control" /></label>
                        <div class="sm:col-span-2 flex justify-end"><button id="resetDeviceToken" class="btn btn-outline" type="button">Reset Token</button></div>
                        <div class="sm:col-span-2 table-wrap"><div id="deviceResetOutput"></div></div>
                      </div>
                    </div>
                    <div class="lg:col-span-2 table-wrap"><div id="devicesList"></div></div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="users">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">Users & Roles</div>
                      <div class="muted">Provision access and assign permissions.</div>
                    </div>
                    <div class="flex flex-wrap gap-2">
                      <button id="loadUsers" class="btn btn-outline" type="button">Load users</button>
                      <button id="loadRoles" class="btn btn-outline" type="button">Load roles</button>
                      <button id="loadPermissions" class="btn btn-outline" type="button">Load perms</button>
                    </div>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="card">
                      <div class="card__head"><div class="font-semibold text-slate-950">Create User</div><button id="createUser" class="btn btn-primary" type="button">Create</button></div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1"><span class="label">Email</span><input id="userEmail" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Password</span><input id="userPassword" class="control" type="password" /></label>
                      </div>
                    </div>
                    <div class="table-wrap"><div id="usersList"></div></div>

                    <div class="card">
                      <div class="card__head"><div class="font-semibold text-slate-950">Create Role</div><button id="createRole" class="btn btn-outline" type="button">Create</button></div>
                      <div class="card__body">
                        <label class="grid gap-1"><span class="label">Role Name</span><input id="roleName" class="control" /></label>
                      </div>
                    </div>
                    <div class="table-wrap"><div id="rolesList"></div></div>

                    <div class="lg:col-span-2 card">
                      <div class="card__head"><div class="font-semibold text-slate-950">Assign Role</div><button id="assignRole" class="btn btn-primary" type="button">Assign</button></div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1"><span class="label">User ID</span><input id="assignUserId" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Role ID</span><input id="assignRoleId" class="control" /></label>
                      </div>
                    </div>

                    <div class="lg:col-span-2 card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Role Permissions</div>
                        <div class="flex flex-wrap gap-2">
                          <button id="assignPermission" class="btn btn-primary" type="button">Assign</button>
                          <button id="loadRolePermissions" class="btn btn-outline" type="button">Load role perms</button>
                        </div>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1"><span class="label">Role ID</span><input id="permRoleId" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Permission Code</span><input id="permCode" class="control" placeholder="items:read" /></label>
                        <div class="table-wrap"><div id="permissionsList"></div></div>
                        <div class="table-wrap"><div id="rolePermissionsList"></div></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="coa">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">Chart of Accounts</div>
                      <div class="muted">Templates, accounts, and mappings.</div>
                    </div>
                    <div class="flex flex-wrap gap-2">
                      <button id="loadTemplates" class="btn btn-outline" type="button">Load templates</button>
                      <button id="loadAccounts" class="btn btn-outline" type="button">Load accounts</button>
                      <button id="loadMappings" class="btn btn-outline" type="button">Load mappings</button>
                    </div>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="table-wrap"><div id="templatesList"></div></div>
                    <div class="card">
                      <div class="card__head"><div class="font-semibold text-slate-950">Clone Template</div><button id="cloneTemplate" class="btn btn-primary" type="button">Clone</button></div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1"><span class="label">Template Code</span><input id="cloneTemplateCode" class="control" placeholder="LB_COA_2025" /></label>
                        <label class="grid gap-1"><span class="label">Effective From</span><input id="cloneEffectiveFrom" class="control" type="date" /></label>
                      </div>
                    </div>
                    <div class="lg:col-span-2 table-wrap"><div id="accountsList"></div></div>

                    <div class="lg:col-span-2 card">
                      <div class="card__head"><div class="font-semibold text-slate-950">Update Account</div><button id="updateAccount" class="btn btn-outline" type="button">Update</button></div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-3">
                        <label class="grid gap-1"><span class="label">Account ID</span><input id="accountId" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Name EN</span><input id="accountNameEn" class="control" /></label>
                        <label class="grid gap-1">
                          <span class="label">Postable</span>
                          <select id="accountPostable" class="control">
                            <option value="">No Change</option>
                            <option value="true">Yes</option>
                            <option value="false">No</option>
                          </select>
                        </label>
                      </div>
                    </div>

                    <div class="lg:col-span-2 card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">COA Mappings</div>
                        <button id="createMapping" class="btn btn-primary" type="button">Create mapping</button>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-3">
                        <label class="grid gap-1"><span class="label">Source Account ID</span><input id="mapSourceAccount" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Target Template Account ID</span><input id="mapTargetAccount" class="control" /></label>
                        <label class="grid gap-1"><span class="label">Effective From</span><input id="mapEffectiveFrom" class="control" type="date" /></label>
                        <div class="sm:col-span-3 table-wrap"><div id="mappingsList"></div></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="section" data-section="auth">
              <div class="mx-auto max-w-6xl space-y-4">
                <div class="card">
                  <div class="card__head">
                    <div>
                      <div class="text-lg font-semibold text-slate-950">Authentication</div>
                      <div class="muted">Login and switch company context.</div>
                    </div>
                  </div>
                  <div class="card__body grid grid-cols-1 gap-4 lg:grid-cols-2">
                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Login</div>
                        <div class="flex flex-wrap gap-2">
                          <button id="login" class="btn btn-primary" type="button">Login</button>
                          <button id="logout" class="btn btn-outline" type="button">Logout</button>
                        </div>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <label class="grid gap-1">
                          <span class="label">Email</span>
                          <input id="loginEmail" class="control" />
                        </label>
                        <label class="grid gap-1">
                          <span class="label">Password</span>
                          <input id="loginPassword" class="control" type="password" />
                        </label>
                        <div class="sm:col-span-2">
                          <div id="loginStatus" class="muted"></div>
                        </div>
                      </div>
                    </div>

                    <div class="card">
                      <div class="card__head">
                        <div class="font-semibold text-slate-950">Session</div>
                        <button id="setCompany" class="btn btn-outline" type="button">Set company</button>
                      </div>
                      <div class="card__body grid grid-cols-1 gap-3 sm:grid-cols-2">
                        <div class="sm:col-span-2 table-wrap"><div id="sessionInfo"></div></div>
                        <label class="grid gap-1 sm:col-span-2">
                          <span class="label">Company ID</span>
                          <input id="sessionCompany" class="control" />
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </main>
      </div>
    </div>

    <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="modal" id="modalConn" data-modal="connection">
        <div class="modal__head">
          <div>
            <div class="modal__title">Connection</div>
            <div class="muted">API base URL + company context. Saved in localStorage.</div>
          </div>
          <button class="btn btn-ghost" type="button" data-close>Close</button>
        </div>

        <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
          <label class="grid gap-1">
            <span class="label">API Base URL</span>
            <input id="apiBase" class="control" placeholder="http://localhost:8000" />
          </label>
          <label class="grid gap-1">
            <span class="label">Company ID</span>
            <input id="companyId" class="control" placeholder="00000000-0000-0000-0000-000000000001" />
          </label>
          <div class="sm:col-span-2 flex flex-wrap items-center gap-2 pt-2">
            <button id="saveConn" class="btn btn-primary" type="button">Save</button>
            <button id="testConn" class="btn btn-outline" type="button">Test</button>
            <span class="muted">Status:</span>
            <span id="connStatusMirror" class="badge" data-tone="bad">Disconnected</span>
          </div>
        </div>
      </div>

      <div class="modal" id="modalCmdk" data-modal="cmdk" style="display:none;">
        <div class="modal__head">
          <div>
            <div class="modal__title">Search</div>
            <div class="muted">Jump to a page or run a quick action.</div>
          </div>
          <button class="btn btn-ghost" type="button" data-close>Close</button>
        </div>

        <div class="grid gap-3">
          <input id="cmdkInput" class="control" placeholder="Try: invoices, items, roles, vat..." />
          <div id="cmdkResults" class="grid gap-2"></div>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
