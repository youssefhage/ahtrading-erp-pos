:root {
  --font-display: "Sora", "Avenir Next", "Avenir", "Segoe UI", Tahoma, Arial, sans-serif;
  --font-body: var(--font-display);
  --font-mono: "JetBrains Mono", "SF Mono", Consolas, Menlo, monospace;

  --radius-xl: 18px;
  --radius-lg: 14px;
  --radius-md: 12px;
  --radius-sm: 10px;

  --bg: #f1f5fb;
  --bg-subtle: #e2ebf9;
  --surface: #ffffff;
  --surface-2: #f7faff;
  --surface-3: #edf3fe;
  --text: #10253d;
  --muted: #627089;

  --line: #d5e1f0;
  --line-strong: #b7c6dc;

  --accent: #1476f4;
  --accent-strong: #0f63d1;
  --accent-soft: rgba(20, 118, 244, 0.14);
  --accent-line-soft: rgba(20, 118, 244, 0.4);
  --accent-line-strong: rgba(20, 118, 244, 0.55);
  --accent-bg-strong: rgba(20, 118, 244, 0.17);
  --accent-ring-soft: rgba(20, 118, 244, 0.22);

  --warn: #bb6f17;
  --warn-line: #f7cc7f;
  --warn-bg: #fff1d9;

  --danger: #c74856;
  --danger-bg: rgba(199, 72, 86, 0.1);
  --danger-line: rgba(199, 72, 86, 0.38);

  --ok: #1b8f62;
  --ok-bg: rgba(27, 143, 98, 0.16);
  --ok-line: rgba(27, 143, 98, 0.34);

  --info: #2f63b8;
  --info-bg: rgba(47, 99, 184, 0.14);
  --info-line: rgba(47, 99, 184, 0.38);

  --shadow-soft: 0 8px 22px rgba(13, 30, 61, 0.11);
  --shadow-card: 0 16px 34px rgba(11, 39, 79, 0.09);
  --shadow-focus: 0 0 0 3px var(--accent-ring-soft);

  --surface-glass-top: rgba(255, 255, 255, 0.86);
  --surface-glass-soft: rgba(255, 255, 255, 0.78);
  --panel-start: #ffffff;
  --panel-end: #f4f9ff;

  --status-info-bg: var(--info-bg);
  --status-info-fg: #224b91;
  --status-info-line: var(--info-line);
  --status-ok-bg: var(--ok-bg);
  --status-ok-fg: #165b42;
  --status-ok-line: var(--ok-line);
  --status-warn-bg: var(--warn-bg);
  --status-warn-fg: #6f4a14;
  --status-warn-line: var(--warn-line);
  --status-error-bg: var(--danger-bg);
  --status-error-fg: #86353f;
  --status-error-line: var(--danger-line);

  --edge-ok-bg: #e7f6eb;
  --edge-ok-line: #b0ddc0;
  --edge-ok-fg: #1f6745;
  --edge-off-bg: #ffe7eb;
  --edge-off-line: #f3a9b7;
  --edge-off-fg: #8c3040;
  --edge-unknown-bg: #f2f6fc;
  --edge-unknown-line: #c9d6ea;
  --edge-unknown-fg: #52657d;

  --quick-card-line: rgba(20, 118, 244, 0.3);
  --quick-card-bg: rgba(20, 118, 244, 0.08);

  --kb-bg: #edf2fb;
  --kb-text: #435978;
}

:root[data-theme="dark"] {
  --bg: #070f1a;
  --bg-subtle: #0f1a2d;
  --surface: #0e1828;
  --surface-2: #14233d;
  --surface-3: #182e4f;
  --text: #e9f0ff;
  --muted: #9faec3;

  --line: #233957;
  --line-strong: #304b72;

  --accent: #56b4ff;
  --accent-strong: #35a1ef;
  --accent-soft: rgba(86, 180, 255, 0.16);
  --accent-line-soft: rgba(86, 180, 255, 0.45);
  --accent-line-strong: rgba(86, 180, 255, 0.58);
  --accent-bg-strong: rgba(86, 180, 255, 0.16);
  --accent-ring-soft: rgba(86, 180, 255, 0.4);

  --warn-bg: rgba(222, 158, 79, 0.2);
  --warn-line: rgba(222, 158, 79, 0.48);
  --warn: #d99a4f;
  --danger-bg: rgba(240, 122, 136, 0.18);
  --danger-line: rgba(240, 122, 136, 0.42);
  --danger: #ec7788;
  --ok-bg: rgba(58, 175, 124, 0.19);
  --ok-line: rgba(58, 175, 124, 0.38);
  --ok: #57d68f;
  --info-bg: rgba(101, 162, 255, 0.22);
  --info-line: rgba(101, 162, 255, 0.45);
  --info: #93bcff;

  --shadow-soft: 0 10px 28px rgba(0, 0, 0, 0.42);
  --shadow-card: 0 14px 32px rgba(0, 0, 0, 0.46);

  --surface-glass-top: rgba(12, 21, 38, 0.89);
  --surface-glass-soft: rgba(11, 20, 35, 0.76);
  --panel-start: rgba(18, 30, 50, 0.98);
  --panel-end: rgba(14, 24, 40, 0.95);

  --status-info-fg: #d8e6ff;
  --status-ok-fg: #d5f0de;
  --status-warn-fg: #ffe1b1;
  --status-error-fg: #ffcad4;

  --edge-ok-bg: rgba(58, 175, 124, 0.22);
  --edge-ok-line: rgba(58, 175, 124, 0.42);
  --edge-ok-fg: #d6f0de;
  --edge-off-bg: rgba(236, 120, 140, 0.2);
  --edge-off-line: rgba(236, 120, 140, 0.45);
  --edge-off-fg: #ffd4dd;
  --edge-unknown-bg: rgba(255, 255, 255, 0.08);
  --edge-unknown-line: rgba(255, 255, 255, 0.18);
  --edge-unknown-fg: #d4e0f3;

  --kb-bg: rgba(255, 255, 255, 0.09);
  --kb-text: #ced9ee;
  --quick-card-line: rgba(86, 180, 255, 0.36);
  --quick-card-bg: rgba(86, 180, 255, 0.13);
}

* {
  box-sizing: border-box;
}

html,
body {
  min-height: 100%;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: var(--font-body);
  color: var(--text);
  background:
    radial-gradient(110rem 52rem at 10% -10%, rgba(80, 130, 255, 0.18), transparent 54%),
    radial-gradient(90rem 34rem at 92% -8%, rgba(31, 168, 255, 0.17), transparent 52%),
    linear-gradient(140deg, var(--bg), var(--bg-subtle));
  overflow: hidden;
}

h1,
h2,
h3,
h4,
p {
  margin: 0;
}

.pageShell {
  position: relative;
  z-index: 1;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 12px;
}

.pageGlow {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(46rem 22rem at 8% 0%, rgba(112, 174, 255, 0.17), transparent 58%),
    radial-gradient(38rem 18rem at 96% 4%, rgba(45, 224, 194, 0.14), transparent 60%);
  z-index: 0;
}

.srOnly {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.top {
  position: sticky;
  top: 0;
  z-index: 30;
  display: flex;
  align-items: stretch;
  justify-content: space-between;
  gap: 12px;
  padding: 10px;
  border: 1px solid var(--line);
  border-radius: var(--radius-xl);
  background: linear-gradient(160deg, var(--surface-glass-top), var(--surface-glass-soft));
  backdrop-filter: blur(12px);
  box-shadow: var(--shadow-soft);
}

.brand {
  min-width: 0;
}

.titleRow {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.brand .title {
  font-weight: 760;
  font-size: 21px;
  letter-spacing: 0.01em;
}

.modePill {
  align-items: center;
  display: inline-flex;
  padding: 5px 10px;
  border-radius: 999px;
  border: 1px solid rgba(0, 0, 0, 0.08);
  background: var(--accent-soft);
  color: var(--accent-strong);
  font-size: 11px;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  font-weight: 760;
}

.brand .subtitle {
  margin-top: 4px;
  color: var(--muted);
  font-size: 11px;
}

.controls {
  width: min(72%, 100%);
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(122px, max-content));
  justify-content: end;
  align-content: start;
  gap: 8px;
}

.controls .btn,
.controls .pill,
.chip,
.segBtn,
.searchChips .chip,
.opActions .btn,
.payActions .btn {
  min-height: 44px;
}

.pill,
.btn,
input,
select,
textarea {
  font: inherit;
  color: var(--text);
}

.pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  min-height: 44px;
  border: 1px solid var(--line);
  border-radius: 999px;
  padding: 8px 12px;
  background: var(--surface-2);
  color: var(--muted);
}

.pill input,
.pill select,
input,
select,
.customer-query,
.cfgField input,
.cfgField select,
.scanRow input,
.custCreateGrid input,
#customerQuery,
#serviceTarget {
  min-width: 0;
  width: 100%;
  border: 0;
  background: transparent;
  outline: none;
}

.btn {
  border: 1px solid var(--line);
  border-radius: 999px;
  background: var(--surface-2);
  color: var(--text);
  padding: 10px 14px;
  cursor: pointer;
  font-weight: 700;
  min-height: 44px;
  transition: transform 0.12s ease, background-color 0.12s ease, border-color 0.12s ease;
}

.btn:hover {
  border-color: var(--line-strong);
  background: var(--surface-3);
}

.btn:active {
  transform: translateY(1px);
}

.btn:focus-visible,
input:focus-visible,
select:focus-visible,
button:focus-visible {
  outline: 0;
  box-shadow: var(--shadow-focus);
}

.btn.isBusy {
  cursor: wait;
}

.btn.primary {
  background: linear-gradient(135deg, var(--accent), var(--accent-strong));
  border-color: var(--accent-line-strong);
  color: #f4fbff;
}

.btn.ghost {
  background: transparent;
}

.btn.ghost:hover {
  background: var(--accent-bg-strong);
}

.btn.tiny {
  min-height: 36px;
  border-radius: 12px;
  padding: 7px 11px;
}

.opsBar {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
  padding: 7px 4px;
  border: 1px solid var(--line);
  border-radius: var(--radius-md);
  background: var(--surface);
}

.opsLeft,
.opsRight {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 6px;
}

.statusPill,
.factPill,
.kbdHint {
  font-size: 12px;
}

.statusPill {
  border-radius: 999px;
  border: 1px solid var(--status-info-line);
  padding: 8px 11px;
  background: var(--status-info-bg);
  color: var(--status-info-fg);
  font-weight: 680;
  white-space: nowrap;
}

.statusPill.ok {
  border-color: var(--status-ok-line);
  background: var(--status-ok-bg);
  color: var(--status-ok-fg);
}

.statusPill.warn {
  border-color: var(--status-warn-line);
  background: var(--status-warn-bg);
  color: var(--status-warn-fg);
}

.statusPill.error {
  border-color: var(--status-error-line);
  background: var(--status-error-bg);
  color: var(--status-error-fg);
}

.factPill,
.kbdHint {
  border: 1px solid var(--line);
  background: var(--surface-2);
  color: var(--muted);
  border-radius: 999px;
  padding: 7px 10px;
  white-space: nowrap;
}

.kbdHint {
  color: var(--muted);
}

.workspace {
  position: relative;
  z-index: 1;
  display: grid;
  grid-template-columns: minmax(250px, 0.92fr) minmax(430px, 1.6fr) minmax(360px, 1.05fr);
  gap: 10px;
  flex: 1;
  min-height: 0;
}

.panel {
  display: flex;
  flex-direction: column;
  gap: 10px;
  border: 1px solid var(--line);
  border-radius: var(--radius-xl);
  padding: 11px;
  background: linear-gradient(170deg, var(--panel-start), var(--panel-end));
  box-shadow: var(--shadow-card);
  min-height: 0;
}

.panelLeft {
  gap: 14px;
}

.panelTitle {
  font-size: 11px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--muted);
  font-weight: 760;
}

.panelHead {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  min-height: 36px;
}

.panelHeadActions,
.cartMeta,
.payActions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.panelSection {
  border: 1px dashed var(--line);
  border-radius: var(--radius-md);
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  background: var(--surface);
}

.modeStrip,
.chipRow {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 6px;
}

.segBtn,
.chip {
  border: 1px solid var(--line);
  border-radius: 12px;
  min-height: 42px;
  background: var(--surface-2);
  color: var(--muted);
  font-weight: 680;
  cursor: pointer;
}

.segBtn.active,
.chip.active {
  border-color: var(--accent-line-strong);
  background: var(--accent);
  color: #f4fbff;
}

.smallText {
  font-size: 12px;
  color: var(--muted);
}

.opActions {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.orderQueue {
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-height: 120px;
}

.queueEmpty {
  color: var(--muted);
  font-size: 12px;
  padding: 11px;
  border-radius: var(--radius-md);
  border: 1px dashed var(--line);
  background: var(--surface-2);
}

.queueItem {
  border: 1px solid var(--line);
  border-radius: var(--radius-md);
  padding: 8px;
  display: flex;
  justify-content: space-between;
  align-items: stretch;
  gap: 8px;
  background: var(--surface);
}

.queueItem.ticketDone {
  background: var(--ok-bg);
  border-color: var(--ok-line);
}

.queueInfo {
  min-width: 0;
}

.queueRowTitle {
  font-size: 12px;
  font-weight: 700;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.queueMeta {
  font-size: 11px;
  color: var(--muted);
  margin-top: 2px;
}

.queueActions {
  display: flex;
  flex-direction: column;
  gap: 6px;
  align-items: stretch;
}

.panelCenter {
  min-width: 0;
  min-height: 0;
}

.panelCenter .results {
  flex: 1;
}

.scanRow {
  display: flex;
  align-items: stretch;
  gap: 8px;
}

.scanRow input,
#scan,
#customerQuery,
#serviceTarget,
.custCreateGrid input,
.cfgField input,
.cfgField select,
#customerCreateName,
#customerCreatePhone,
#customerCreateEmail,
#payment,
#quickApiBaseUrl,
#quickEmail,
#quickPassword,
#quickMfaCode,
#quickDeviceCode,
#adminUrl,
#quickStatus,
#settingsStatus {
  min-height: 44px;
  border-radius: 999px;
  border: 1px solid var(--line);
  padding: 10px 12px;
}

.scanMeta {
  min-height: 34px;
  display: flex;
  align-items: center;
  color: var(--accent-strong);
  font-size: 12px;
  font-weight: 700;
}

.hint {
  color: var(--muted);
  font-size: 12px;
}

.results {
  margin-top: 4px;
  border: 1px solid var(--line);
  border-radius: var(--radius-md);
  background: var(--surface);
  min-height: 0;
  overflow: auto;
  flex: 1;
}

.resultRow {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: center;
  padding: 10px;
  border-top: 1px solid var(--line-soft, var(--line));
}

.resultRow:first-child {
  border-top: 0;
}

.resultRow:hover {
  background: var(--surface-2);
}

.resultRow.active {
  background: var(--accent-bg-soft);
  border-color: var(--accent-line-soft);
}

.resultRight {
  display: flex;
  align-items: center;
  gap: 8px;
}

.name {
  font-weight: 680;
}

.sub {
  margin-top: 4px;
  color: var(--muted);
}

.tag {
  border-radius: 999px;
  padding: 4px 9px;
  border: 1px solid var(--line);
  font-size: 11px;
  white-space: nowrap;
}

.tag.official {
  border-color: #4f89ff;
  background: rgba(79, 137, 255, 0.15);
  color: #2d67dc;
}

.tag.unofficial {
  border-color: #ff9b5d;
  background: rgba(255, 155, 93, 0.2);
  color: #c66f24;
}

.panelRight {
  min-width: 0;
}

.cart {
  flex: 1;
  min-height: 125px;
  overflow: auto;
  border: 1px solid var(--line);
  border-radius: var(--radius-md);
  padding: 6px;
  background: var(--surface);
}

.cartItem {
  display: grid;
  grid-template-columns: 1fr auto auto auto;
  gap: 8px;
  align-items: center;
  padding: 8px;
  border: 1px solid var(--line-soft, var(--line));
  border-radius: 10px;
  margin-bottom: 6px;
}

.cartItem .title {
  font-weight: 680;
}

.small {
  font-size: 12px;
  color: var(--muted);
}

.mono {
  font-family: var(--font-mono);
  font-size: 11px;
}

.qty {
  display: inline-flex;
  align-items: center;
  border: 1px solid var(--line);
  border-radius: 999px;
  min-height: 34px;
  overflow: hidden;
  background: var(--surface-2);
}

.qty button {
  border: 0;
  min-width: 32px;
  min-height: 34px;
  background: transparent;
  border-right: 1px solid var(--line);
}

.qty .n {
  width: 34px;
  text-align: center;
  font-weight: 700;
}

.remove {
  border-radius: 999px;
  border: 1px solid var(--danger-line);
  background: var(--danger-bg);
  color: var(--danger);
  font-size: 12px;
  min-width: 44px;
  text-align: center;
  padding: 8px;
  cursor: pointer;
  font-weight: 760;
}

.totals {
  display: grid;
  gap: 6px;
  border: 1px solid var(--line);
  border-radius: var(--radius-lg);
  padding: 10px;
  background: var(--surface-2);
}

.row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
}

.splitTotals {
  display: grid;
  gap: 8px;
}

.split {
  border-left: 2px solid var(--line);
  padding-left: 8px;
}

.pay {
  display: grid;
  gap: 8px;
}

.paymentRow {
  display: flex;
  gap: 8px;
  align-items: center;
}

.paymentRow .pill,
.custLookup {
  width: 100%;
}

.custLookup {
  display: grid;
  grid-template-columns: 1fr repeat(2, auto);
  gap: 8px;
}

.custCreate {
  border: 1px solid var(--line);
  border-radius: var(--radius-md);
  padding: 8px;
  background: var(--surface-2);
}

.custCreateGrid {
  display: grid;
  gap: 8px;
  grid-template-columns: 1fr;
}

.custCreateActions,
.customerResults,
.row,
.modalActions,
.payActions,
.twoCols,
.quickGrid,
.quickGridSecond,
.cartMeta,
.panelHeadActions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.customerResults {
  border: 1px solid var(--line);
  border-radius: var(--radius-md);
  padding: 6px;
  background: var(--surface);
  max-height: 110px;
  overflow: auto;
}

.custRow {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid var(--line);
  padding: 8px;
  cursor: pointer;
}

.custRow:last-child {
  border-bottom: 0;
}

.custRow.active,
.custRow.preselected {
  background: var(--accent-bg-strong);
}

.custCreateStatus,
.quickStatus,
.modalStatus {
  min-height: 20px;
  color: var(--muted);
  font-size: 12px;
}

.foot {
  border: 1px solid var(--line);
  background: var(--surface);
  border-radius: var(--radius-md);
  padding: 8px 10px;
}

.edgeBadges {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.edgeBadge {
  border: 1px solid var(--line);
  padding: 6px 9px;
  border-radius: 999px;
  font-size: 11px;
}

.edgeOk {
  border-color: var(--edge-ok-line);
  background: var(--edge-ok-bg);
  color: var(--edge-ok-fg);
}

.edgeOffline {
  border-color: var(--edge-off-line);
  background: var(--edge-off-bg);
  color: var(--edge-off-fg);
}

.edgeUnknown {
  border-color: var(--edge-unknown-line);
  background: var(--edge-unknown-bg);
  color: var(--edge-unknown-fg);
}

.backdrop {
  position: fixed;
  z-index: 50;
  inset: 0;
  background: var(--backdrop, var(--backdrop-tint, rgba(7, 17, 33, 0.6));
}

.modal {
  position: fixed;
  z-index: 70;
  width: min(980px, calc(100vw - 24px));
  max-height: min(90vh, 820px);
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid var(--line);
  border-radius: var(--radius-xl);
  background: var(--surface);
  box-shadow: 0 24px 72px rgba(7, 12, 30, 0.35);
  display: flex;
  flex-direction: column;
  overflow: auto;
}

.modalHeader {
  padding: 14px;
  border-bottom: 1px solid var(--line);
}

.modalBody {
  padding: 14px;
  display: grid;
  gap: 10px;
}

.modalActions {
  padding: 10px 14px 14px;
  justify-content: flex-end;
  border-top: 1px solid var(--line);
}

.twoCols {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.cfgCard,
.quickCard {
  border: 1px solid var(--line);
  border-radius: var(--radius-lg);
  padding: 11px;
  background: var(--surface);
}

.cfgCard h4,
.quickCard h4 {
  margin-bottom: 8px;
}

.cfgField {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-bottom: 8px;
  color: var(--text);
}

.quickGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 8px;
}

.quickGridSecond {
  margin-top: 5px;
}

.check,
.checkInline {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  min-width: 0;
}

.hidden {
  display: none !important;
}

@media (max-width: 1300px) {
  .workspace {
    grid-template-columns: minmax(220px, 1fr) minmax(280px, 1.3fr);
  }

  .panelLeft {
    grid-column: 1 / -1;
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .panelLeft .panelSection {
    margin-bottom: 0;
  }
}

@media (max-width: 920px) {
  body {
    overflow: auto;
  }

  .workspace {
    display: grid;
    grid-template-columns: 1fr;
    overflow: auto;
  }

  .top {
    flex-direction: column;
  }

  .controls {
    width: 100%;
    justify-content: start;
    grid-template-columns: repeat(auto-fit, minmax(100px, max-content));
  }

  .panelLeft {
    grid-template-columns: 1fr;
  }

  .twoCols {
    grid-template-columns: 1fr;
  }

  .quickGrid {
    grid-template-columns: 1fr;
  }
}
